<h1>投稿一覧</h1>
<!--カテゴリ検索-->
<div class="search-form">
  <%= form_tag(posts_path, method: "get") do %>
    <h4>カテゴリで絞り込む</h4>
    <%= select_tag :genre_status, options_for_select(Post.genre_statuses) %>
    <%= submit_tag "検索" %>
  <% end %>
</div>

<table class="table">
  <thead>
    <tr>
      <th style="width: 10%;">ユーザー</th>
      <th colspan="1"></th>
      <th>投稿</th>
      <th colspan="1"></th>
      <th style="width: 10%;">カテゴリ</th>
      <th>投稿日時</th>
      <th style="width: 10%;">コメント</th>
      <th style="width: 10%;">いいね</th>
      <th style="width: 10%;">お気に入り</th>
    </tr>
  </thead>
  <tbody>
   <% @posts.each do |post| %>
    <tr>
      <%= link_to user_path(post.user) do %>
      <td><%= attachment_image_tag(post.user, :profile_image, :fill, 50, 50, class: "img-circle", fallback: "no-image-mini.jpeg") %></td>
      <td><%= post.user.name %></td>
      <% end %>
      <td><%= attachment_image_tag post, :image, :fill, 120, 100, fallback: "no-image.png" %></td>
      <td><%= post.body %></td>
      <td><%= post.genre_status %></td>
      <td><%= post.created_at.strftime('%Y/%m/%d') %></td>
      <!--コメント数の表示-->
      <td><div class= "glyphicon glyphicon-comment">：<%= post.comments.count %>件</div></td>
      <!--いいね数の表示-->
      <td id="likes_buttons<%= post.id %>" >
      <%= render 'likes/like', { post: post} %>
      </td>
      <!--お気に入り登録・解除-->
      <td id="favorites_buttons<%= post.id %>" >
      <%= render 'favorites/favorite', { post: post} %>
      </td>
      <td><%= link_to "詳細表示", post_path(post.id), class:"btn btn-default" %></td>
      <% end %>
    </tr>
  <tbody>
</table>


